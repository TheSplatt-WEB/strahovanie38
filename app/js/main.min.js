"use strict";$(function(){$(".slider-top-wrapper").slick({prevArrow:'<button type="button" class="slick-prev slick-arrow" style="background-image: url(../images/arrow-left.svg);"></button>',nextArrow:'<button type="button" class="slick-next slick-arrow" style="background-image: url(../images/arrow-right.svg);"></button>',autoplay:!0,autoplaySpeed:4e3,speed:600,pauseOnFocus:!1,pauseOnHover:!1,dots:!0,responsive:[{breakpoint:1050,settings:{prevArrow:!1,nextArrow:!1}}]}),$(".header-link, .to-form__link").on("click",function(e){e.preventDefault();e=$(this).attr("href"),e=$(e).offset().top;$("body,html").animate({scrollTop:e},800)}),$(".header-inner__menu-btn, .header-link").on("click",function(){$(".header-link").hasClass("openDone")?($(".header-link").removeClass("openDone"),$(".header-inner__list li").css({left:"-100vw",right:"150vw"})):($(".header-link").addClass("openDone"),$(".header-inner__list li").css({left:"-15px",right:"-15px"}))}),$(document).on("click",function(e){$(".header-inner__menu-btn").is(e.target)||0!==$(".header-inner__menu-btn").has(e.target).length||$(".header-inner__list li").is(e.target)||0!==$(".header-inner__list li").has(e.target).length||($(".header-link").removeClass("openDone"),$(".header-inner__list li").css({left:"-100vw",right:"150vw"}))}),$(window).on("resize",function(){851<$(window).width()&&$(".header-inner__list li").removeAttr("style")}),$(window).on("scroll",function(){500<$(this).scrollTop()?$(".btn-top").fadeIn():$(".btn-top").fadeOut()}),$(".btn-top").on("click",function(){return $("body,html").animate({scrollTop:0},800),!1}),$("body").on("change",".files__input",function(){for(var e=[],i=0;i<$(this).get(0).files.length;++i)e.push($(this).get(0).files[i].name);$(this).next().next("span").text(e.join(", "))}),$("body").on("change","input#formNodrivers",function(){$(".files__item-nodrivers").hasClass("openDone")?($(".files__item-nodrivers").removeClass("openDone"),$(".files__item-nodrivers").fadeIn(300),$(".files__input-nodrivers").prop("required",!0)):($(".files__item-nodrivers").addClass("openDone"),$(".files__item-nodrivers").fadeOut(300).show(),$(".files__item-nodrivers").removeAttr("style"),$(".files__input-nodrivers").prop("required",!1))}),$("body").on("change","input#formNoinspect",function(){$(".files__item-noinspect").hasClass("openDone")?($(".files__item-noinspect").removeClass("openDone"),$(".files__item-noinspect").fadeIn(300),$(".files__input-noinspect").prop("required",!0)):($(".files__item-noinspect").addClass("openDone"),$(".files__item-noinspect").fadeOut(300).show(),$(".files__item-noinspect").removeAttr("style"),$(".files__input-noinspect").prop("required",!1))}),$("body").on("click",".remove__driver",function(){$(this).parent().parent().remove()}),$("body").on("click",".added__driver",function(){$(".drivers__inner").append('<div class="files__item files__item-nodrivers"><div class="files__name"><span>*</span>Водительское удостоверение<a class="remove__driver" href="javascript:;">(удалить)</a></div><div class="files__buttons"><div class="files__btn"><input class="files__input files__input-nodrivers" name="attach[]" type="file" accept=".jpg, .png, .gif, .jpeg, .pdf" required><div class="files__choose">Лицевая</div><span>файл не выбран</span></div><div class="files__btn"><input class="files__input files__input-nodrivers" name="attach[]" type="file" accept=".jpg, .png, .gif, .jpeg, .pdf" required><div class="files__choose">Оборотная</div><span>файл не выбран</span></div></div></div>')}),$("body").on("click",".added__man",function(){$(".drivers__inner").append('<div class="files__item files__item-nodrivers"><div class="files__name"><span>*</span>Паспорт страхуемого лица<a class="remove__driver" href="javascript:;">(удалить)</a></div><div class="files__buttons"><div class="files__btn"><input class="files__input files__input-nodrivers" name="attach[]" type="file" accept=".jpg, .png, .gif, .jpeg, .pdf" required><div class="files__choose">Главная</div><span>файл не выбран</span></div><div class="files__btn"><input class="files__input files__input-nodrivers" name="attach[]" type="file" accept=".jpg, .png, .gif, .jpeg, .pdf" required><div class="files__choose">Прописка</div><span>файл не выбран</span></div></div></div>')}),$(".hint-link__kasko").on("click",function(){$(".hint-link__descr-kasko").fadeToggle()}),$(document).on("click",function(e){$(".hint-link__kasko").is(e.target)||0!==$(".hint-link__kasko").has(e.target).length||$(".hint-link__descr-kasko").is(e.target)||0!==$(".hint-link__descr-kasko").has(e.target).length||$(".hint-link__descr-kasko").fadeOut()}),$(".hint-link__life").on("click",function(){$(".hint-link__descr-life").fadeToggle()}),$(document).on("click",function(e){$(".hint-link__life").is(e.target)||0!==$(".hint-link__life").has(e.target).length||$(".hint-link__descr-life").is(e.target)||0!==$(".hint-link__descr-life").has(e.target).length||$(".hint-link__descr-life").fadeOut()}),$(".fancybox-form").on("submit",function(){var e=$(this);return $.ajax({type:"POST",url:"mail.php",data:e.serialize()}).done(function(){alert("Ваша заявка принята, спасибо."),setTimeout(function(){e.trigger("reset")},1e3)}),!1}),$.fn.setCursorPosition=function(e){var i;$(this).get(0).setSelectionRange?$(this).get(0).setSelectionRange(e,e):$(this).get(0).createTextRange&&((i=$(this).get(0).createTextRange()).collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select())},$('input[type="tel"]').on("click",function(){$(this).setCursorPosition(3)}),$("input[type=tel]").mask("+7 (999) 999-9999")}),$(function(){document.getElementById("form").addEventListener("submit",function(e){var i=document.querySelector(".progress-bar"),t=document.querySelector(".files__item-noinspect"),n=document.querySelectorAll(".files__input-noinspect"),s=document.querySelectorAll(".files__item-nodrivers"),r=document.querySelectorAll(".files__input-nodrivers"),o=document.getElementById("form").querySelectorAll(".files__btn span"),l=new XMLHttpRequest,a=this,c=$(this);e.preventDefault(),l.upload.onloadstart=function(){i.style.opacity=1,i.style.visibility="visible"},l.onreadystatechange=function(){4==l.readyState&&200==l.status&&(alert(l.responseText),console.log(l.responseText),0==l.responseText.indexOf(a.name.value)&&(c.trigger("reset"),o.forEach(function(e){e.textContent="файл не выбран"}),t.classList.remove("openDone"),t.style.display="",s.forEach(function(e){e.classList.remove("openDone")}),s.forEach(function(e){e.style=""}),n.forEach(function(e){e.setAttribute("required",!0)}),r.forEach(function(e){e.setAttribute("required",!0)}),i.style.opacity=0,i.style.visibility="hidden"))},l.onerror=function(){alert("Ошибка, попробуйте еще раз")},l.open("POST","contact.php",!0),l.send(new FormData(a))},!1)});